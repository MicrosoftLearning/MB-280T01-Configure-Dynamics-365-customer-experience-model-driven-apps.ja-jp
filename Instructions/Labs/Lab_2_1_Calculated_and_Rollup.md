---
lab:
  title: 'ラボ 2.1: 計算フィールドとロールアップ フィールドを作成する'
---

# ラボ 2.1: 計算フィールドとロールアップ フィールドを作成する 

## シナリオ
Bellows 大学は、複数のキャンパスとプログラムを持つ教育機関です。 Bellow 大学の講師や管理者の多くは、イベントに参加したり、品目を購入したりする必要があります。 従来から、これらの経費を追跡することは困難でした。
キャンパス管理では、従業員に経費を報告するためのデジタルの方法を用意することにより、経費報告システムを最新化したいと考えています。
イベントや購入のたびに、ユーザーが経費明細書を完成させるのが理想的です。 経費明細書ごとに、ユーザーが個々の経費行項目を追加できるようにする必要があります。 このソリューションに対する作業は既に開始されています。 経費明細書テーブルは作成済みです。 このプロジェクトを引き継いで完了するように依頼されました。

## ラボ手順の概要
このラボをきちんと修了すると、次のことができるようになります。
- 既存のテーブルに新しいフィールドを追加する
- ロールアップ フィールドの作成
- 計算フィールドを作成する

## 前提条件
- "モジュール 1 ラボ 0 - ラボ環境を検証する" と 経費明細書ソリューションをインポートしたラボ 1.1 の修了

## 始める前に考慮すべきこと
- 名前付け規則 - 名前は、十分注意して入力してください。

## 演習 1: 計算フィールドとロールアップ フィールドを作成する
**目標:** この演習では、経費明細書テーブルにロールアップと計算フィールドを作成します。

### タスク #1: 経費明細書テーブルにロールアップ フィールドを追加する
1. 必要に応じて、Power Apps 作成者ポータルにアクセスします。
2. 必ず前回の演習で経費明細書ソリューションをインポートした環境で作業してください。
3. 左側のナビゲーションを使用して、**[ソリューション]** を選択します
4. 経費明細書ソリューションを見つけて選択します。
5. 経費明細書テーブルを見つけて開きます。
6. [スキーマ] グループで、**[列]** を選択します。
7. **[+ 新しい列]** を選択します。
8. [表示名] に「*`Report Total`*」と入力します。
9. [データ型] に **[通貨]** を選択します。
10. [必須] に **[省略可能]** を選択します。
11. "動作" フィールドで、**[ロールアップ]** を選択します。
12. **[保存]** ボタンを選択します。 (構成するには列を保存する必要があります。)
13. 列が保存されると、ポップアップ ウィンドウが表示されるはずです。 (ポップアップ メッセージが表示される場合は、ポップアップを許可することが必要な場合があります。)
14. [関連エンティティ] で、**[+ 関連エンティティの追加]** 選択します。
15. **[(経費行) 経費明細書]** を選択します。
16. チェック マーク ボタンを選択して変更を受け入れます。
17. [集計] で、**[+ 集計の追加]** を選択します。
18. [集計関数] を **[合計]** に設定します。
19. "集計関連エンティティ" フィールドを **[(経費行) 経費の金額]** に設定します。
20. 緑色のチェック マークを選択し、**[保存して閉じる]** ボタンを選択します。

### タスク #2: 経費明細書テーブルに Power FX 数式計算フィールドを追加する
1. 必要に応じて、Power Apps 作成者ポータルにアクセスします。
2. 必ず前回の演習で経費明細書ソリューションをインポートした環境で作業してください。
3. 左側のナビゲーションを使用して、**[ソリューション]** を選択します
4. 経費明細書ソリューションを見つけて選択します。
5. 経費明細書テーブルを見つけて開きます。
6. [スキーマ] グループで、**[列]** を選択します。
7. **[+ 新しい列]** を選択します。
8. [表示名] に「*`Last Date for approval`*」と入力します。
9. [データ型] に **[数式]** を選択します。
10. 式 `DateAdd('Report Due Date',2)` を入力します。
11. "書式" フィールドを **[日付のみ]** に設定します。
12. **[保存]** ボタンを選択します。 (構成するには列を保存する必要があります。)
